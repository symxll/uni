"use strict";const p=require("../../../../common/vendor.js"),u=require("./test.js"),D=require("./digit.js"),E=require("../config/config.js");function j(e=0,n=0,t=0){return Math.max(e,Math.min(n,Number(t)))}function $(e,n=!1){return u.number(e)?n?`${e}px`:Number(e):/(rpx|upx)$/.test(e)?n?`${p.index.upx2px(parseInt(e))}px`:Number(p.index.upx2px(parseInt(e))):n?`${parseInt(e)}px`:parseInt(e)}function y(e=30){return new Promise(n=>{setTimeout(()=>{n()},e)})}function q(){return p.index.getSystemInfoSync().platform.toLowerCase()}function b(){return p.index.getSystemInfoSync()}function C(e,n){if(e>=0&&n>0&&n>=e){const t=n-e+1;return Math.floor(Math.random()*t+e)}return 0}function F(e=32,n=!0,t=null){const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||r.length,e)for(let o=0;o<e;o++)i[o]=r[0|Math.random()*t];else{let o;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(let s=0;s<36;s++)i[s]||(o=0|Math.random()*16,i[s]=r[s==19?o&3|8:o])}return n?(i.shift(),`u${i.join("")}`):i.join("")}function a(e=void 0){let n=this.$parent;for(;n;)if(n.$options&&n.$options.name!==e)n=n.$parent;else return n;return!1}function w(e,n="object"){if(u.empty(e)||typeof e=="object"&&n==="object"||n==="string"&&typeof e=="string")return e;if(n==="object"){e=l(e);const r=e.split(";"),i={};for(let o=0;o<r.length;o++)if(r[o]){const s=r[o].split(":");i[l(s[0])]=l(s[1])}return i}let t="";return typeof e=="object"&&e.forEach((r,i)=>{const o=i.replace(/([A-Z])/g,"-$1").toLowerCase();t+=`${o}:${r};`}),l(t)}function x(e="auto",n=""){return n||(n=E.config.unit||"px"),n=="rpx"&&u.number(String(e))&&(e=e*2),e=String(e),u.number(e)?`${e}${n}`:e}function g(e){if([null,void 0,NaN,!1].includes(e)||typeof e!="object"&&typeof e!="function")return e;const n=u.array(e)?[]:{};for(const t in e)e.hasOwnProperty(t)&&(n[t]=typeof e[t]=="object"?g(e[t]):e[t]);return n}function d(e={},n={}){let t=g(e);if(typeof t!="object"||typeof n!="object")return!1;for(const r in n)n.hasOwnProperty(r)&&(r in t?n[r]==null||typeof t[r]!="object"||typeof n[r]!="object"?t[r]=n[r]:t[r].concat&&n[r].concat?t[r]=t[r].concat(n[r]):t[r]=d(t[r],n[r]):t[r]=n[r]);return t}function m(e,n={}){if(typeof e!="object"||typeof n!="object")return!1;for(const t in n)n.hasOwnProperty(t)&&(t in e?n[t]==null||typeof e[t]!="object"||typeof n[t]!="object"?e[t]=n[t]:e[t].concat&&n[t].concat?e[t]=e[t].concat(n[t]):e[t]=m(e[t],n[t]):e[t]=n[t]);return e}function S(e){console.error(`uView提示：${e}`)}function A(e=[]){return e.sort(()=>Math.random()-.5)}String.prototype.padStart||(String.prototype.padStart=function(e,n=" "){if(Object.prototype.toString.call(n)!=="[object String]")throw new TypeError("fillString must be String");const t=this;if(t.length>=e)return String(t);const r=e-t.length;let i=Math.ceil(r/n.length);for(;i>>=1;)n+=n,i===1&&(n+=n);return n.slice(0,r)+t});function I(e=null,n="yyyy-mm-dd"){let t;e?/^\d{10}$/.test(e.toString().trim())?t=new Date(e*1e3):typeof e=="string"&&/^\d+$/.test(e.trim())?t=new Date(Number(e)):t=new Date(typeof e=="string"?e.replace(/-/g,"/"):e):t=new Date;const r={y:t.getFullYear().toString(),m:(t.getMonth()+1).toString().padStart(2,"0"),d:t.getDate().toString().padStart(2,"0"),h:t.getHours().toString().padStart(2,"0"),M:t.getMinutes().toString().padStart(2,"0"),s:t.getSeconds().toString().padStart(2,"0")};for(const i in r){const[o]=new RegExp(`${i}+`).exec(n)||[];if(o){const s=i==="y"&&o.length===2?2:0;n=n.replace(o,r[i].slice(s))}}return n}function V(e=null,n="yyyy-mm-dd"){e==null&&(e=Number(new Date)),e=parseInt(e),e.toString().length==10&&(e*=1e3);let t=new Date().getTime()-e;t=parseInt(t/1e3);let r="";switch(!0){case t<300:r="刚刚";break;case(t>=300&&t<3600):r=`${parseInt(t/60)}分钟前`;break;case(t>=3600&&t<86400):r=`${parseInt(t/3600)}小时前`;break;case(t>=86400&&t<2592e3):r=`${parseInt(t/86400)}天前`;break;default:n===!1?t>=2592e3&&t<365*86400?r=`${parseInt(t/(86400*30))}个月前`:r=`${parseInt(t/(86400*365))}年前`:r=I(e,n)}return r}function l(e,n="both"){return e=String(e),n=="both"?e.replace(/^\s+|\s+$/g,""):n=="left"?e.replace(/^\s*/,""):n=="right"?e.replace(/(\s*$)/g,""):n=="all"?e.replace(/\s+/g,""):e}function M(e={},n=!0,t="brackets"){const r=n?"?":"",i=[];["indices","brackets","repeat","comma"].indexOf(t)==-1&&(t="brackets");for(const o in e){const s=e[o];if(!(["",void 0,null].indexOf(s)>=0))if(s.constructor===Array)switch(t){case"indices":for(let f=0;f<s.length;f++)i.push(`${o}[${f}]=${s[f]}`);break;case"brackets":s.forEach(f=>{i.push(`${o}[]=${f}`)});break;case"repeat":s.forEach(f=>{i.push(`${o}=${f}`)});break;case"comma":let c="";s.forEach(f=>{c+=(c?",":"")+f}),i.push(`${o}=${c}`);break;default:s.forEach(f=>{i.push(`${o}[]=${f}`)})}else i.push(`${o}=${s}`)}return i.length?r+i.join("&"):""}function P(e,n=2e3){p.index.showToast({title:String(e),icon:"none",duration:n})}function L(e="success",n=!1){["primary","info","error","warning","success"].indexOf(e)==-1&&(e="success");let t="";switch(e){case"primary":t="info-circle";break;case"info":t="info-circle";break;case"error":t="close-circle";break;case"warning":t="error-circle";break;case"success":t="checkmark-circle";break;default:t="checkmark-circle"}return n&&(t+="-fill"),t}function U(e,n=0,t=".",r=","){e=`${e}`.replace(/[^0-9+-Ee.]/g,"");const i=isFinite(+e)?+e:0,o=isFinite(+n)?Math.abs(n):0,s=typeof r>"u"?",":r,c=typeof t>"u"?".":t;let f="";f=(o?D.round(i,o)+"":`${Math.round(i)}`).split(".");const h=/(-?\d+)(\d{3})/;for(;h.test(f[0]);)f[0]=f[0].replace(h,`$1${s}$2`);return(f[1]||"").length<o&&(f[1]=f[1]||"",f[1]+=new Array(o-f[1].length+1).join("0")),f.join(c)}function Z(e,n=!0){const t=parseInt(e);return n?/s$/.test(e)?e:e>30?`${e}ms`:`${e}s`:/ms$/.test(e)?t:/s$/.test(e)?t>30?t:t*1e3:t}function H(e){return`00${e}`.slice(-2)}function k(e,n){const t=a.call(e,"u-form-item"),r=a.call(e,"u-form");t&&r&&r.validateField(t.prop,()=>{},n)}function _(e,n){if(typeof e!="object"||e==null||typeof n!="string"||n==="")return"";if(n.indexOf(".")!==-1){const t=n.split(".");let r=e[t[0]]||{};for(let i=1;i<t.length;i++)r&&(r=r[t[i]]);return r}return e[n]}function O(e,n,t){if(typeof e!="object"||e==null)return;const r=function(i,o,s){if(o.length===1){i[o[0]]=s;return}for(;o.length>1;){const c=o[0];(!i[c]||typeof i[c]!="object")&&(i[c]={}),o.shift(),r(i[c],o,s)}};if(!(typeof n!="string"||n===""))if(n.indexOf(".")!==-1){const i=n.split(".");r(e,i,t)}else e[n]=t}function N(){const e=getCurrentPages();return`/${e[e.length-1].route||""}`}function R(){return getCurrentPages()}const Y={range:j,getPx:$,sleep:y,os:q,sys:b,random:C,guid:F,$parent:a,addStyle:w,addUnit:x,deepClone:g,deepMerge:d,shallowMerge:m,error:S,randomArray:A,timeFormat:I,timeFrom:V,trim:l,queryParams:M,toast:P,type2icon:L,priceFormat:U,getDuration:Z,padZero:H,formValidate:k,getProperty:_,setProperty:O,page:N,pages:R};exports.$parent=a;exports.addStyle=w;exports.addUnit=x;exports.deepClone=g;exports.deepMerge=d;exports.error=S;exports.formValidate=k;exports.getProperty=_;exports.getPx=$;exports.index=Y;exports.page=N;exports.queryParams=M;exports.setProperty=O;exports.sleep=y;exports.sys=b;exports.toast=P;
